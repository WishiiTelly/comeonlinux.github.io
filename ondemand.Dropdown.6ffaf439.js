"use strict";(self.webpackChunk_twitter_responsive_web=self.webpackChunk_twitter_responsive_web||[]).push([["ondemand.Dropdown"],{666:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Z});var n=i(7896),o=i(2784),r=i(78052),s=i(25686),a=i(35193),l=i(11731),c=i(55249),d=i(20023),h=i(50829),p=i(57552),m=i(13867),u=i(74054),_=i(41425),f=i(15686),w=i(70451),b=i(54044),g=i(73186);const v=g.Z.create((e=>({rootNarrow:{maxWidth:"75%"},rootWide:{maxWidth:`calc(${e.spaces.space64} * 6)`},anchor:g.Z.absoluteFillObject,mask:{...g.Z.absoluteFillObject,position:"fixed"},bodyRectHelper:{...g.Z.absoluteFillObject,bottom:void 0},content:{borderRadius:e.borderRadii.small,position:"absolute",overflow:"hidden",backgroundColor:e.colors.navigationBackground,boxShadow:e.boxShadows.medium},contentInitialRender:{position:"fixed",opacity:0},contentFixed:{position:"fixed",overflowY:"auto",overscrollBehavior:"contain"}})));class Z extends o.Component{constructor(e,t){super(e,t),this._handleAnimateComplete=()=>{const{onAnimateComplete:e}=this.props;e&&e()},this._handleEsc=e=>{const{onDismiss:t}=this.props,{altKey:i,ctrlKey:n,key:o,metaKey:r}=e;!(i||n||r)&&"Escape"===o&&t()},this._receiveBodyRectHelperRef=e=>{e&&this._bodyRectHelperNode!==e&&(this._bodyRectHelperNode=e,this._scheduleUpdate())},this._receiveAnchorRef=e=>{e&&this._anchorNode!==e&&(this._anchorNode=e,this._scheduleUpdate())},this._receiveContentRef=e=>{e&&this._contentNode!==e&&(this._contentNode=e,this._scheduleUpdate())},this._updatePosition=()=>{if(!(this._mounted&&(this._anchorNode||this.props.position)&&this._contentNode&&this._contentNode instanceof window.HTMLElement&&this._bodyRectHelperNode&&this._bodyRectHelperNode instanceof window.HTMLElement))return;const e="rtl"===this._languageDirection,t=this._contentNode.scrollHeight,i=this._contentNode.scrollWidth,{left:n,top:o,width:s}=this._bodyRectHelperNode.getBoundingClientRect(),{height:a,width:l}=r.Z.get("window");let c={left:0,top:0,height:0,width:0};this.props.position?c={...c,...this.props.position}:this._anchorNode&&this._anchorNode instanceof window.HTMLElement&&(c=this._anchorNode.getBoundingClientRect());const{height:d,left:h,top:p,width:m}=c,u=l-s,_=h-n,f=p-o,w=h+m>=i,b=p+d>=t,g=l-h>=i,v=a-p>=t,Z=this.props.preferredVerticalOrientation,y=((e,t)=>e?"left"===t?"right":"left":t)(e,this.props.preferredHorizontalOrientation),R=this.state.verticalOrientation||(({canOrientDown:e,canOrientUp:t,verticalPreference:i})=>t&&e||!t&&!e?i:t?"up":"down")({verticalPreference:Z,canOrientUp:b,canOrientDown:v}),E=this.state.horizontalOrientation||(({canOrientLeft:e,canOrientRight:t,horizontalPreference:i})=>!e||"left"!==i&&t?"right":"left")({horizontalPreference:y,canOrientLeft:w,canOrientRight:g}),N=this.props.isFixed?h:_,O=this.props.isFixed?p:f,x="up"===R?O+d-t:O,D="left"===E?l-N-m-u:l-N-i-u;this.setState({top:Math.max(x,0),right:D,verticalOrientation:R,horizontalOrientation:E})},this.state=Object.freeze({}),this._scheduleUpdate=(0,c.Z)(this._updatePosition,window.requestAnimationFrame),this._scheduleDebouncedUpdate=(0,a.Z)(this._scheduleUpdate,250)}componentDidMount(){this._mounted=!0,r.Z.addEventListener("change",this._scheduleDebouncedUpdate)}componentWillUnmount(){this._mounted=!1,r.Z.removeEventListener("change",this._scheduleDebouncedUpdate)}render(){const{animateInDuration:e,animateType:t,children:i,isFixed:r,onDismiss:a,preventFocusShift:c,withKeyboardNavigation:Z}=this.props,{right:y,top:R,verticalOrientation:E}=this.state,N=void 0===R,O=Z?d.Z:o.Fragment,x=`calc(100vh - ${R||0}px)`,D=c=>{const d="rtl"===c,h=[v.content,N&&v.contentInitialRender,r&&[v.contentFixed,{maxHeight:x}],{top:R,end:d?void 0:y,start:d?y:void 0}];return o.createElement(o.Fragment,null,o.createElement(s.Z,{onClick:a,style:v.mask}),o.createElement(s.Z,{ref:this._receiveBodyRectHelperRef,style:v.bodyRectHelper}),o.createElement(b.Z,null,(({windowWidth:r})=>o.createElement(s.Z,{accessibilityRole:"menu",onKeyUp:this._handleEsc,ref:this._receiveContentRef,style:[r<g.Z.theme.breakpoints.medium?v.rootNarrow:v.rootWide,h]},N&&"slide"===t?i:o.createElement(l.Z,{animateMount:"up"!==E,duration:e,onAnimateComplete:this._handleAnimateComplete,show:!0,type:t},(({isAnimating:e})=>o.createElement(u.Z,{id:"Dropdown",minimizeReporting:e},((e,t)=>o.createElement(s.Z,(0,n.Z)({ref:e()},t({})),i)))))))))};return o.createElement(f.Z,null,(({direction:e})=>(this._languageDirection=e,o.createElement(s.Z,{ref:this._receiveAnchorRef,style:v.anchor},o.createElement(_.Z.Dropdown,null,o.createElement(m.Z.Consumer,null,(t=>o.createElement(w.Z.Consumer,null,(({isModal:i})=>o.createElement(p.Z,{history:t,isModal:i,onDismiss:a},c?D(e):o.createElement(h.Z,null,o.createElement(O,null,D(e)))))))))))))}}Z.defaultProps={preferredHorizontalOrientation:"left",preferredVerticalOrientation:"down",animateType:"slide",animateInDuration:"normal",withKeyboardNavigation:!0}},55249:(e,t,i)=>{i.d(t,{Z:()=>n});const n=(e,t)=>{let i=null;const n=()=>{i=null,e()};return()=>(i||(i=t(n)),i)}}}]);
