"use strict";(self.webpackChunk_twitter_responsive_web=self.webpackChunk_twitter_responsive_web||[]).push([["shared~loaders.video.VideoPlayerDefaultUI~loaders.video.VideoPlayerHashtagHighlightUI~loaders.video.VideoPlay"],{6869:(e,t,n)=>{n.d(t,{Z:()=>r});n(6886);var s=n(2784);const o={transitionDuration:"250ms",transitionProperty:"opacity, height",transitionTimingFunction:"ease",willChange:"opacity"};function r({children:e,show:t}){const[n,r]=s.useState(!t);return s.useEffect((()=>{t&&n&&r(!1)}),[n,t]),s.useMemo((()=>{const i={...o,opacity:t?1:0};return s.createElement("div",{onTransitionEnd:e=>{t||n||r(!0)},style:i},n?null:e)}),[e,t,n])}},95606:(e,t,n)=>{n.d(t,{Z:()=>E});n(6886);var s=n(2784),o=n(25686),r=n(79404),i=n.n(r),a=n(15686),l=n(27519),c=n(73186),u=n(28904),d=n(6019);const h=i().d26d8730,p=i().f1b6bcec;class _ extends s.Component{constructor(...e){super(...e),this.state={openContextMenu:!1,positionX:0,positionY:0},this._handleOpenContextMenu=e=>t=>{var n;if(t.preventDefault(),null!=e&&null!=(n=e.source)&&n.id&&(e.source.type===d.EB.TWEET||e.source.type===d.EB.BROADCAST)){const e=t.currentTarget.getBoundingClientRect();this.setState({openContextMenu:!0,positionX:t.clientX-e.left,positionY:t.clientY-e.top})}},this._handleCloseContextMenu=()=>{this.state.openContextMenu&&this.setState({openContextMenu:!1})},this._handleCopyVideoAddress=()=>{document.addEventListener("copy",this._handleCopy),document.execCommand("copy")},this._handleCopy=e=>{var t,n;const{playerState:s}=this.props,o=null==s||null==(t=s.source)?void 0:t.id,r=null==s||null==(n=s.source)?void 0:n.type;o&&r&&e.clipboardData&&(r===d.EB.BROADCAST?e.clipboardData.setData("text/plain",`https://twitter.com/i/broadcasts/${o}`):r===d.EB.TWEET&&e.clipboardData.setData("text/plain",`https://twitter.com/i/status/${o}`),e.preventDefault()),document.removeEventListener("copy",this._handleCopy)},this._isGif=e=>{const t=e&&(0,u.sI)(e);return t&&t.contentType===d.wF.GIF}}componentDidMount(){document.addEventListener("click",this._handleCloseContextMenu)}componentWillUnmount(){document.removeEventListener("click",this._handleCloseContextMenu)}render(){const{children:e,playerState:t}=this.props,{openContextMenu:n,positionX:r,positionY:i}=this.state,u=this._isGif(t);return s.createElement(a.Z,null,(({direction:a})=>s.createElement(o.Z,{onClick:this._handleCloseContextMenu,onContextMenu:this._handleOpenContextMenu(t),style:c.Z.absoluteFill},e,n&&s.createElement(o.Z,{style:[m.menuWrapper,"rtl"===a?{top:i,right:r}:{top:i,left:r}]},s.createElement(l.Z,{actionText:u?p:h,onClick:this._handleCopyVideoAddress})))))}}const E=_,m=c.Z.create((e=>({menuWrapper:{borderRadius:e.borderRadii.small,position:"absolute",overflow:"hidden",backgroundColor:e.colors.navigationBackground,boxShadow:e.boxShadows.medium,display:"table"}})))},73346:(e,t,n)=>{n.d(t,{Z:()=>l});var s=n(2784),o=n(25686),r=n(9933),i=n(73186),a=n(39574);const l=function(e){const t=s.useRef(null),{enabled:n,playerApi:l,playerState:c}=e;if(!n)return e.children||null;const u=e=>{l&&c&&(c.isPlaying?l.pause():l.play())},d=e=>{if(l&&c){const t=parseInt(e.key,10)/10;l.scrubToFraction(t)}};return s.createElement(r.Z,{containerRef:t,enabled:!0,handlers:{[a.Z.K]:u,[a.Z.M]:e=>{l&&c&&(c.isMuted?l.unmute():l.mute())},[a.Z.Space]:u,[a.Z.C]:e=>{l&&c&&l.toggleCaptions()},[a.Z.Home]:e=>{l&&c&&l.scrubToFraction(0)},[a.Z[0]]:d,[a.Z[1]]:d,[a.Z[2]]:d,[a.Z[3]]:d,[a.Z[4]]:d,[a.Z[5]]:d,[a.Z[6]]:d,[a.Z[7]]:d,[a.Z[8]]:d,[a.Z[9]]:d,[a.Z.End]:e=>{l&&c&&l.scrubToFraction(1)}}},s.createElement(o.Z,{focusable:!0,ref:t,style:i.Z.absoluteFill},e.children))}},39574:(e,t,n)=>{n.d(t,{Z:()=>s});const s={ArrowDown:"ArrowDown",ArrowUp:"ArrowUp",ArrowLeft:"ArrowLeft",ArrowRight:"ArrowRight",Enter:"Enter",Escape:"Escape",Space:"space",Tab:"Tab",K:"k",M:"m",C:"c",0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",Home:"home",End:"end"}},6019:(e,t,n)=>{n.d(t,{$2:()=>s,CX:()=>l,EB:()=>a,Eq:()=>o,ak:()=>i,wF:()=>r});const s={VISIT:"url",WATCH:"watch"},o={watch_now:"watch_now",visit_site:"visit_site",shop:"shop",see_more:"see_more",go_to:"go_to"},r={MEDIA:"media_entity",GIF:"gif",VMAP:"vmap",BROADCAST:"broadcast"},i={AD:"ad",CONTENT:"content"},a={BROADCAST:"broadcast",DM:"dm",TWEET:"tweet"},l=720},28904:(e,t,n)=>{n.d(t,{Ci:()=>k,Fv:()=>L,MU:()=>I,Ot:()=>v,Ov:()=>M,SY:()=>g,XE:()=>R,_5:()=>Z,aZ:()=>S,c9:()=>C,mr:()=>W,sI:()=>P,us:()=>A,xB:()=>w,zm:()=>D});n(36728);var s=n(79404),o=n.n(s),r=n(10013),i=n(6019);const a=o().i3b7a017,l=o().ie5d110f,c=o().df5f11b3,u=o().a7cd5cf4,d=o().b6eb8f6a,h=o().dcc2b9b3,p=o().hf4ffd4d,_=o().f6e90cd7,E=o().e7d191ed,m=o().h1888a33,y=o().c58b2ab7,b=e=>"number"==typeof e?(0,r.wl)(e):e,R=e=>{const{viewCount:t,viewerCount:n}=e;return t||0===t?y({viewCount:b(t)}):n||0===n?m({viewerCount:b(n)}):null},C=e=>{if(!e)return"";return(({durationSeconds:e,isBroadcast:t,isLive:n,timecode:s,videoTrack:o}={})=>{const r=[],i=t||n?d:u,a=n?p:h;if(r.push(a({locVideoType:i})),"number"==typeof e&&e&&!n){const{hoursWord:t,minutesWord:n,secondsWord:s}=f(e);r.push(_({hoursWord:t,minutesWord:n,secondsWord:s}))}if("number"==typeof s&&s){const{hoursWord:e,minutesWord:t,secondsWord:n}=f(s);r.push(E({hoursWord:e,minutesWord:t,secondsWord:n}))}const l=o&&R(o);return l&&r.push(l),r.join(". ")})({isLive:e.isLive,isBroadcast:e.contentType===i.wF.BROADCAST,durationSeconds:A(e),timecode:Z(e),videoTrack:e})},f=e=>{const{hours:t,minutes:n,seconds:s}=N(e),o={hoursWord:"",minutesWord:"",secondsWord:""};return 0===s&&0===n&&0===t&&0===n?(o.secondsWord=a(0),o):(o.hoursWord=t>0?c(t):"",o.minutesWord=n>0?l(n):"",o.secondsWord=s>0?a(s):"",o)},T=(e,t,n)=>Math.max(Math.min(e,n),t),v=e=>e?(e.currentTimeMs||0)/1e3:void 0,O=e=>e.endTimeS-e.startTimeS,g=e=>{var t;const n=null==e||null==(t=e.controls)?void 0:t.playbackTimeRange,s=k(e),o=v(s);if(void 0===o)return 0;if(!n)return o;const r=o-n.startTimeS;return T(r,0,O(n))},I=e=>e?(e.durationMs||0)/1e3:void 0,D=e=>{var t;const n=null==e||null==(t=e.controls)?void 0:t.playbackTimeRange,s=k(e),o=I(s);return o?n?O(n):o:0},M=e=>{const t=v(e);return t&&Math.round(t)},A=e=>{const t=I(e);return t&&Math.round(t)},S=(e,t)=>{var n,s,o;const r=I(k(e));if(!r)return;const i=null!=(n=null==e||null==(s=e.controls)||null==(o=s.playbackTimeRange)?void 0:o.startTimeS)?n:0;return T((i+t)/r,0,1)},P=e=>e.tracks.find((e=>0===e.id)),k=e=>e.tracks.find((t=>t.id===e.currentTrackId)),w=e=>e.controls&&e.controls.isPosterShown?P(e):k(e),Z=e=>{if(e){const t=e.requestedTimecode;return t&&t>0?t:e.replayEditedStartTime}},L=e=>W(Math.round(e/1e3)),W=e=>{const{hours:t,minutes:n,seconds:s}=N(e),o=s<10?`0${s}`:s,r=n<10&&t?`0${n}`:n;return t?`${t}:${r}:${o}`:`${r}:${o}`},N=e=>({hours:Math.floor(e/3600),minutes:Math.floor(e%3600/60),seconds:Math.floor(e%60)})},2790:(e,t,n)=>{n.d(t,{Z:()=>u});n(6886);var s=n(2784),o=n(25686),r=n(8443),i=n(73186),a=n(28904);class l extends s.Component{constructor(...e){super(...e),this._playInitiatedTime=null,this.state={waitingForPlayback:!1},this._checkPlayRequest=(e,t)=>{const n=t&&"PLAY_REQUESTED"===t.controls.playState,s=n&&(!e||"PLAY_REQUESTED"!==e.controls.playState);n?s&&this._startPlaybackWait():this._clearPlaybackWait()},this._clearPlaybackWait=()=>{clearInterval(this._bufferingCheck),this._playInitiatedTime=null},this._startPlaybackWait=()=>{const{waitingForPlaybackThresholdMs:e}=this.props;this._clearPlaybackWait(),this._playInitiatedTime=Date.now(),this._bufferingCheck=setInterval((()=>{if(!this._playInitiatedTime)return this._clearPlaybackWait();const t=this._playInitiatedTime;Date.now()-t>e&&(this.setState({waitingForPlayback:!0}),this._clearPlaybackWait())}),100)}}static getDerivedStateFromProps(e){const{playerState:t}=e;return t&&"PLAY_REQUESTED"===t.controls.playState?null:{waitingForPlayback:!1}}componentWillUnmount(){this._clearPlaybackWait()}componentDidMount(){this._checkPlayRequest(null,this.props.playerState)}componentDidUpdate(e){this._checkPlayRequest(e.playerState,this.props.playerState)}render(){const{playerState:e}=this.props;if(!e)return null;const t=(0,a.Ci)(e);return t&&t.isBuffering||this.state.waitingForPlayback?s.createElement(o.Z,{pointerEvents:"none",style:[i.Z.absoluteFill,c.buttonContainer]},s.createElement(r.Z,{color:i.Z.theme.colors.white,size:60})):null}}l.defaultProps={waitingForPlaybackThresholdMs:1e3};const c=i.Z.create((e=>({buttonContainer:{justifyContent:"center",alignItems:"center"}}))),u=l},63276:(e,t,n)=>{n.d(t,{Z:()=>u});n(6886);var s=n(2784),o=n(79404),r=n.n(o),i=n(36934),a=n(5422),l=n(41720);const c="EUROPEAN_COPYRIGHT_VIOLATION";class u extends s.Component{constructor(...e){super(...e),this._handleReload=()=>{const{playerApi:e,playerState:t}=this.props;if(!t||!t.errorInfo)return;const{canRetry:n}=t.errorInfo;return n?()=>{e&&e.reload()}:void 0}}render(){const{displayBackgroundImage:e=!1,imageSrc:t,playerApi:n,playerState:o}=this.props;if(!n||!o)return null;const r=this._getErrorAndData();if(!r)return null;const i=this._maybeUseCustomErrorElement(r)||this._buildMessage(r);return s.createElement(a.Z,{displayBackgroundImage:e,errorMessage:i,iconPlayError:"BROADCAST_NOT_FOUND"===o.error,imageSrc:t||o.posterImage,onReloadPress:this._handleReload()})}_buildMessage(e){const{error:t,errorData:n}=e;if("LIVE_VIDEO_COPYRIGHT_VIOLATION_ERROR"===t||t===c){const{copyrightHolder:e}=n||{};return e?l.pB[t]({holder:e}):l.C2}return t&&l.pB[t]||l.I}_getErrorAndData(){const{playerState:e}=this.props,{error:t,errorData:n}=null!=e?e:{};return t?{error:t,errorData:n}:null}_maybeUseCustomErrorElement(e){const{error:t,errorData:n}=e,o=null==n?void 0:n.copyrightHolder,{includeDisputeLinkInCopyrightErrorMessage:a}=this.props;return o&&(a&&t===c)?s.createElement(r().I18NFormatMessage,{$i18n:"e570a97b",copyrightHolder:o},s.createElement(i.ZP,{link:"https://help.twitter.com/forms/ipi/copyright-dispute"},r().a15adf2c)):null}}},41720:(e,t,n)=>{n.d(t,{C2:()=>i,I:()=>r,pB:()=>a});var s=n(79404),o=n.n(s);const r=o().c1658fc6,i=o().h519ae04,a={BROADCAST_REQUEST_ERROR:r,BROADCAST_ENDED_NO_REPLAY:o().ce871584,BROADCAST_NOT_FOUND:o().c101eb96,CONFIG_USER_DATA_NETWORK_ERROR:r,CONFIG_NETWORK_ERROR:r,DMCA_TAKEDOWN_ERROR:o().gb24a514,EUROPEAN_COPYRIGHT_VIOLATION:o().hcaf3e63,LIVE_PARSE_ERROR:r,LIVE_STREAM_ACQUISITION_MISSING_CONTENT_ID:r,LIVE_STREAM_ACQUISITION_NETWORK_ERROR:r,LIVE_VIDEO_GEOBLOCK_ERROR:o().if05c038,LIVE_VIDEO_COPYRIGHT_VIOLATION_ERROR:o().d420171b,LIVE_VIDEO_GEOLOCATION_PROMPT:o().b1eb72fa,MEDIA_NOT_SUPPORTED:o().c057680c,MEDIA_SRC_INVALID_ERROR:r,MEDIA_ABORTED:r,MEDIA_NETWORK_ERROR:r,MEDIA_DECODE_ERROR:r,MEDIA_GEOBLOCK_ERROR:o().i5dfae6e,MEDIA_UNKNOWN_CODE_ERROR:r,ORIGINAL_CONTEXT_DELETED:o().c2388276,UNSUPPORTED_TYPE:r,VMAP_NETWORK_ERROR:r,VMAP_PARSE_ERROR:r}},22509:(e,t,n)=>{n.d(t,{Z:()=>d});n(6886);var s=n(2784),o=n(28316),r=n(25686),i=n(73186),a=n(28904),l=n(6019);class c extends s.Component{constructor(...e){super(...e),this.state={grabbing:!1},this._firstClick=!0,this._componentRef=s.createRef(),this._handleMouseDown=()=>{const{playerState:e}=this.props,t=e&&(0,a.Ci)(e);t&&t.is360&&this._setEventListener("mousemove",this._handleMouseMove),this._setEventListener("mouseup",this._handleMouseUp)},this._handleMouseMove=()=>{const{playerState:e}=this.props,t=e&&(0,a.Ci)(e);t&&t.is360&&(this.setState({grabbing:!0}),this._setEventListener("mouseup",this._handleGrabRelease)),this._unsetEventListener("mousemove",this._handleMouseMove),this._unsetEventListener("mouseup",this._handleMouseUp)},this._handleGrabRelease=()=>{this.setState({grabbing:!1}),this._unsetEventListener("mouseup",this._handleGrabRelease)},this._handleMouseUp=e=>{this._unsetEventListener("mousemove",this._handleMouseMove),this._unsetEventListener("mouseup",this._handleMouseUp),this._handleClick(e)},this._handleClick=e=>{const{hideControls:t,isTouchOnlyUI:n,onClick:s,playerApi:o,playerDisplayOptions:r,playerState:i}=this.props;if(s)return s(e);if(o&&i){const e=(0,a.Ci)(i),s=e&&e.contentType&&e.contentType===l.wF.GIF;if(this._firstClick&&!s&&(this._firstClick=!1,i.isMuted))return void o.unmute();if(n&&t)return;const{pause:c,play:u,replay:d}=o,h=e&&e.isLive,p=r&&r.liveClickthrough,_=e&&p&&p.enabled&&e.isLive&&i.isPlaying&&!e.is360;if(n&&t)return;if(s)return void(i.isPlaying?c():u());e&&e.currentTimeMs===e.durationMs?d():i.isPlaying?_?this._handleLiveClickthrough():h||c():u()}},this._setEventListener=(e,t)=>{const n=o.findDOMNode(this._componentRef.current);n&&n.addEventListener(e,t)},this._unsetEventListener=(e,t)=>{const n=o.findDOMNode(this._componentRef.current);n&&n.removeEventListener(e,t)},this._handleLiveClickthrough=()=>{const{playerApi:e,playerDisplayOptions:t,playerState:n}=this.props,s=t&&t.liveClickthrough,o=n&&(0,a.Ci)(n);if(s&&n&&o&&e){const t=s.url||n.eventUrl||o.broadcastShareUrl;t&&(window.open(t,s.target||"_blank"),e.liveClickthroughClicked())}}}render(){const{playerState:e}=this.props,{grabbing:t}=this.state,n=e&&(0,a.Ci)(e),o=n&&n.is360;return s.createElement(r.Z,{onMouseDown:this._handleMouseDown,ref:this._componentRef,style:[i.Z.absoluteFill,o?t?u.base360grabbing:u.base360:u.base]})}}const u=i.Z.create((e=>({base:{cursor:"pointer"},base360:{cursor:"grab"},base360grabbing:{cursor:"grabbing"}}))),d=c},43174:(e,t,n)=>{n.d(t,{Z:()=>h});var s=n(7896),o=(n(6886),n(2784)),r=n(73487),i=n(11839),a=n(73186),l=n(59884),c=n(28904);class u extends o.Component{constructor(...e){super(...e),this._playVideo=e=>t=>{e&&e.play(),t&&t.stopPropagation()}}render(){const{playerApi:e,playerState:t,withPlayButton:n}=this.props;if(!(e&&t&&t.controls&&t.controls.isPosterShown))return null;const u=(0,c.sI)(t),h=this.props.imageSrc||t.posterImage,p=(0,c.c9)(u);return o.createElement(i.Z,(0,s.Z)({},n?null:{accessibilityLabel:p},{focusable:!n,interactiveStyles:null,onPress:this._playVideo(e),style:[a.Z.absoluteFill,d.buttonContainer]}),h&&o.createElement(r.Z,{resizeMode:"cover",source:h,style:a.Z.absoluteFill}),n&&o.createElement(l.Z,{accessibilityLabel:p,onPress:this._playVideo(e),type:"video"}))}}u.defaultProps={withPlayButton:!0};const d=a.Z.create((e=>({buttonContainer:{justifyContent:"center",alignItems:"center"}}))),h=u}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/shared~loaders.video.VideoPlayerDefaultUI~loaders.video.VideoPlayerHashtagHighlightUI~loaders.video.VideoPlay.806c3969.js.map