"use strict";(self.webpackChunk_twitter_responsive_web=self.webpackChunk_twitter_responsive_web||[]).push([["ondemand.ProfileSidebar"],{14770:(e,t,i)=>{i.d(t,{Z:()=>s});var r=i(16587),a=i(78772),n=i(80826);const s=(0,r.Z)(((e,t)=>e.isTrue("responsive_web_graphql_media_timeline")?(e=>(0,n.Z)({timelineId:`userMedia-graphql-${e}`,network:{getEndpoint:e=>e.ProfileTimelines.fetchUserMedia,getEndpointParams:({count:t,cursor:i})=>({count:t,cursor:"string"==typeof i?i:void 0,userId:e})},formatResponse:a.Z,context:"FETCH_MEDIA_TIMELINE",perfKey:"userMedia-GraphQL"}))(t):(e=>(0,n.Z)({timelineId:`userMedia-${e}`,network:{getEndpoint:e=>e.URT.fetchUserMedia,getEndpointParams:t=>({...t,userId:e})},context:"FETCH_MEDIA_TIMELINE",perfKey:"userMedia"}))(t)))},15933:(e,t,i)=>{i.r(t),i.d(t,{ProfileSidebarContainer:()=>D,default:()=>k,toRelativePath:()=>U});i(6886),i(85940);var r=i(2784),a=i(8443),n=i(73186),s=i(88796),o=i(79404),d=i.n(o),c=i(1206),l=i(63140),p=i(90876),m=i(20032),u=i(2698),h=i(23803),I=i(23335),f=i(78149),_=i(92160),g=(i(67694),i(24949)),M=i(13737),E=i(58955),Z=i(24630),w=i(52612),b=i(24433),y=i(30102),S=i(14770);const P=(e,t)=>(0,S.Z)(e,t),v=[],x=(0,g.P1)(((e,t)=>P((0,Z.qP)(e),t).selectEntries(e)),y.ZP.createHydratedSelector,b.f1,((e,t,i)=>(0,M.Z)(e,(e=>{var r,a;if(e.type!==w.ZP.Tweet)return v;const n=t(e.content.id),s=null!=n&&null!=(r=n.extended_entities)&&r.media?(0,E.Z)(n.extended_entities.media.map((e=>{const t=e.sensitive_media_warning;return t?Object.keys(t).filter((e=>t[e])):[]})).flat()):void 0,o=Boolean(e.content.promotedMetadata);return!n||n.tombstoneInfo||n.isDeleted||o||n.possibly_sensitive&&!i||null!=s&&s.size||null==(a=n.extended_entities)||!a.media?v:n.extended_entities.media.map((t=>({mediaItem:t,entry:e})))})))),A=(e,t)=>P(e,t).fetchInitial(),L=(e,t)=>x(e,t.userId),R=(e,t)=>t.hideMediaModule?f.Z.LOADED:((e,t)=>P((0,Z.qP)(e),t).selectInitialFetchStatus(e))(e,t.userId)||f.Z.LOADING,T=(0,_.Z)().propsFromState((()=>({mediaItemsWithEntry:L,mediaFetchStatus:R}))).adjustStateProps((({mediaFetchStatus:e,mediaItemsWithEntry:t})=>({mediaItems:t.map((e=>({...e.mediaItem}))),mediaItemsWithEntry:t,mediaFetchStatus:e}))).propsFromActions((()=>({createLocalApiErrorHandler:(0,I.createLocalApiErrorHandlerWithContextFactory)("PROFILE_SIDE_BAR"),fetchRecentMediaIfNeeded:A}))),C=d().b327c12a,F={[l.ZP.NotAuthorizedToViewUser]:{customAction:c.Z}};class D extends r.Component{constructor(...e){super(...e),this._fetchRecentUserMedia=()=>{const{createLocalApiErrorHandler:e,fetchRecentMediaIfNeeded:t,hideMediaModule:i,userId:r}=this.props;!i&&t(this.context.featureSwitches,r).catch(e(F))}}componentDidUpdate(e){e.userId===this.props.userId&&e.hideMediaModule===this.props.hideMediaModule||this._fetchRecentUserMedia()}componentDidMount(){this._fetchRecentUserMedia()}render(){const{mediaFetchStatus:e}=this.props;return e&&e!==h.ZP.LOADING?this._renderSidebar():r.createElement(a.Z,{accessibilityLabel:"Loading profile sidebar"})}_renderSidebar(){const{hideMediaModule:e,userId:t,userScreenName:i,withTopicsToFollow:a}=this.props,s=this._getImages();return r.createElement(p.Z,{profileScreenName:i,profileUserId:t,withTopicsToFollow:a},s.length>=2&&!e?r.createElement(u.Z,{cacheLocationKey:"profileSidebar",images:s,singleImageMaxAspectRatio:n.Z.theme.aspectRatios.landscape,singleImageMinAspectRatio:n.Z.theme.aspectRatios.landscape}):null)}_getImages(){const{mediaItems:e,mediaItemsWithEntry:t}=this.props;return t.map(((t,i)=>{const{entry:r,mediaItem:a}=t,n=s.Z.getOriginalImage(a),{expanded_url:o}=a;if(n&&o){var d,c;const t={pathname:U(o),state:{mediaItems:{items:e,index:i},forwardPivotInfo:null==(d=r.content)?void 0:d.forwardPivot,nudges:null==(c=r.content)?void 0:c.nudges}};return{width:n.width,height:n.height,url:n.url,backgroundColor:s.Z.getBackgroundColor(a),cropCandidates:s.Z.getCropCandidates(a),accessibilityLabel:a.ext_alt_text||C,shouldShowAltLabel:!1,expandedUrl:t}}})).filter(Boolean)}}D.contextType=m.rC;const U=e=>e.replace("https://twitter.com",""),k=T(D)}}]);
