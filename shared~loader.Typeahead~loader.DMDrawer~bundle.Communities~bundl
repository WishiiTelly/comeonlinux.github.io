"use strict";(self.webpackChunk_twitter_responsive_web=self.webpackChunk_twitter_responsive_web||[]).push([["shared~loader.Typeahead~loader.DMDrawer~bundle.Communities~bundle.Delegate~bundle.DirectMessages~bundle.DMRic"],{84515:(e,t,r)=>{r.d(t,{E5:()=>c,lk:()=>d});r(6886);var n=r(53223),a=r(22167),i=r(60805);const o={entries:{},entryIdsByConversationId:{},reactionsByMessageId:{}},s=(e=[],t={})=>e.map((e=>({...e,user:(0,i.b)(t[e.user_id])||{created_at:"",description:"",entities:{},followed_by:!1,followers_count:0,following:!1,friends_count:0,id:parseInt(e.user_id,10),id_str:e.user_id,name:"",profile_image_url_https:"",protected:!1,screen_name:"",verified:!1}})));function l(e,t){const{entries:r,entryIdsByConversationId:n}=t;return(n[e]||[]).map((e=>r[e]&&r[e].data)).filter(Boolean)}const c=(e,t=o,r)=>{const{conversation_id:n,participants:a,...i}=e;return{conversation_id:n,...i,entries:t.entryIdsByConversationId[n]||[],participants:s(a,r)}},d=(e,t,r)=>{const{conversation_id:o,participants:c,social_proof:d,..._}=e,u={conversation_id:o,..._,entries:l(o,t),participants:s(c,r),social_proof:void 0};return d&&(u.social_proof=((e=[],t={})=>e.map((e=>{if(e.proof_type===a.UN.MUTUAL_FRIENDS){const{users:r,...a}=e;return{...a,users:(0,n.Z)(r.map((e=>(0,i.b)(t[e]))))}}return e})))(d,r)),u}},43790:(e,t,r)=>{r.d(t,{Z:()=>c});r(6886);var n=r(72192),a=r(22167),i=r(42938);const o=(e=0)=>new Date(Number(e)),s=(e,t)=>o(e.join_time)-o(t.join_time),l=({user:e},{user:t})=>(0,i.ZP)(e.id_str,t.id_str),c=(e,t)=>{const{created_by_user_id:r,participants:i,type:o}=e,[c,d]=(0,n.Z)(i,(({user:e})=>e.id_str===t));return d.length?o===a.eD.GROUP&&1===d.length?[...c,...d]:r?d.sort(((...e)=>(t,r)=>e.map((e=>e(t,r))).filter((e=>!!e))[0]||0)((e=>({user:t},{user:r})=>{switch(e){case t.id_str:return-1;case r.id_str:return 1;default:return 0}})(r),s,l)):d:c}},65894:(e,t,r)=>{r.d(t,{Rl:()=>E,ZP:()=>u,e7:()=>m});r(6886);var n=r(27218),a=r(79404),i=r.n(a),o=r(22167),s=r(43790);const l=i().b5b7fb94,c=i().g755fcde,d=i().f6b1ff81,_=i().j652293d,u=(e,t,r,n)=>{const{type:a,name:i,participants:c={}}=e;if(a===o.eD.GROUP&&i)return i;if(!c.length)return;if(a===o.eD.GROUP&&r)return l;const d=(0,s.Z)(e,t).map((({user:e})=>e));return m(d,t,a,n)},m=(e=[],t,r=o.eD.GROUP,a)=>{const i=e.filter((e=>e.id_str!==t)).map((e=>e.name));switch(i.length){case 0:return c;case 1:{const[e]=i;return r===o.eD.GROUP?d({name:e}):e}default:{const e=!0,t=a?i.slice(0,a):i,r=(0,n.Z)(t,e),o=a?Math.max(i.length-a,0):0;return o>0?_({listOfParticipants:r,count:o}):r}}},E=(e,t,r,n,a,i)=>t===o.eD.GROUP&&e?e:n.length?t===o.eD.GROUP&&a?l:m(n,r,t,i):void 0},60805:(e,t,r)=>{r.d(t,{b:()=>n});const n=e=>{if(e)return{blocking:e.blocking,can_dm:e.can_dm,can_media_tag:e.can_media_tag,created_at:e.created_at,description:e.description,entities:e.entities,followed_by:e.followed_by,followers_count:e.followers_count,following:e.following,friends_count:e.friends_count,id:e.id,id_str:e.id_str,name:e.name,profile_image_url_https:e.profile_image_url_https,protected:e.protected,screen_name:e.screen_name,verified:e.verified,is_blue_verified:e.is_blue_verified}}},67313:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(2784),a=r(43790),i=r(23204),o=r(22414);const s=e=>{const{conversation:t,perspective:r,size:s,withBadge:l}=e;if(t){var c,d;const e=t.avatar_image_https,_=(0,a.Z)(t,r).map((({user:e})=>e)).slice(0,o.Ww).map((({id_str:e,profile_image_url_https:t,screen_name:r})=>({id_str:e,profile_image_url_https:t,screen_name:r}))),u=(null==(c=t.avatar)||null==(d=c.image)?void 0:d.original_info)||void 0,m=(0,o.Tg)(u)||(0,o.Oc)(e)||(0,o.v1)(_,s),E=(0,o.br)(t.conversation_id,_,t.type),p=l&&null!=t&&t.participants?t.participants.length-1:0;return m?n.createElement(i.Z,{avatar:m,avatarLink:E,badgeCount:p}):null}return null}},23204:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(2784),a=r(12934),i=r(11839),o=r(67986),s=r(22414);function l(e){const{avatar:t,avatarLink:r,badgeCount:l}=e;return n.createElement(n.Fragment,null,n.createElement(a.Z,{ratio:1},r?n.createElement(i.Z,{interactiveStyles:null,link:r,testID:o.Z.conversationAvatar},t):t),l?(0,s.DT)({badgeCount:l}):null)}},22414:(e,t,r)=>{r.d(t,{Ww:()=>A,Tg:()=>b,v1:()=>v,Oc:()=>I,br:()=>P,DT:()=>Z});var n=r(2784),a=r(94407),i=r(25686),o=r(35953),s=r(44329),l=r(73186),c=r(92471),d=r(12934),_=r(3188),u=r(79404),m=r.n(u),E=r(22167);const p=l.Z.create((e=>({circle:{borderRadius:e.borderRadii.infinite,overflow:"hidden"},container:{height:"auto",width:"100%"},itemAccessory:{top:-e.spacesPx.space24+e.spacesPx.space1,end:-e.spacesPx.space16-e.spacesPx.space1},userDecoration:{fontSize:e.fontSizes.subtext3,position:"absolute",backgroundColor:e.colors.gray100,marginStart:e.spaces.space8,boxSizing:"border-box",width:e.spaces.space24,height:e.spaces.space24,fontWeight:e.fontWeights.regular}}))),g=l.Z.create((e=>({container:{flexDirection:"row"},left:{flex:1},right:{flex:1,marginStart:e.borderWidths.small,marginEnd:`calc(-1 * ${e.borderWidths.small})`}}))),C=l.Z.create((e=>({container:{flexDirection:"column"},top:{flex:1,marginBottom:e.borderWidths.small},bottom:{flex:1}}))),T=p,f="DMConversationAvatarBadge",h="MutlipleParticipantAvatarContainer",A=3,O=m().fd48249b,S=({left:e,right:t})=>n.createElement(i.Z,{style:g.container},n.createElement(i.Z,{style:g.left},e),n.createElement(i.Z,{style:g.right},t)),N=({bottom:e,top:t})=>n.createElement(i.Z,{style:C.container},n.createElement(i.Z,{style:C.top},t),n.createElement(i.Z,{style:C.bottom},e)),b=e=>e?n.createElement(o.Z,{accessibilityLabel:"",aspectMode:s.Z.SQUARE,backgroundColor:l.Z.theme.colors.gray50,image:e,rounded:!0}):null,v=(e,t)=>{const r=e.length;return 0===r?null:1===r?R(e[0],t):n.createElement(i.Z,{style:T.circle,testID:h},y(e))},I=e=>e?n.createElement(a.Z,{source:e}):null,y=e=>{const t=e.length,r=e.map(((e,r)=>{const a=2===t||3===t&&0===r?.5:1;return e.profile_image_url_https?n.createElement(i.Z,{key:e.id_str,style:T.container},n.createElement(c.default,{aspectRatio:a,shape:"none",size:"custom",uri:e.profile_image_url_https})):null}));if(2===t)return n.createElement(d.Z,{ratio:1},n.createElement(S,{left:r[1],right:r[0]}));{const e=n.createElement(N,{bottom:r[2],top:r[1]}),t=r[0];return n.createElement(S,{left:e,right:t})}},R=(e,t)=>e.profile_image_url_https?n.createElement(i.Z,{key:e.id_str,style:T.container},n.createElement(c.default,{size:t||"xxLarge",uri:e.profile_image_url_https})):null,P=(e,t,r)=>r===E.eD.GROUP?`/messages/${e}/participants`:r===E.eD.ONE_TO_ONE&&t.length>0&&t[0].screen_name?`/${t[0].screen_name}`:void 0,Z=({badgeCount:e})=>n.createElement(i.Z,{style:T.itemAccessory,testID:f},n.createElement(_.Z,{accessibilityLiveRegion:"none",count:e,standalone:!0,style:T.userDecoration,textColor:"text",truncatedCountFormatter:()=>"",unreadCountLabel:O,withTruncatedCount:!1}))},44016:(e,t,r)=>{r.d(t,{E:()=>_,Z:()=>c});r(6886);var n=r(2784),a=r(36934),i=r(43790),o=r(65894),s=r(85883),l=r(40342);function c({conversation:e,highlightingTokens:t=null,isConversationSearchTitle:r=!1,isMessageSearchTitle:s=!1,newConversationParticipants:c,perspective:_,renderAvatarCell:u,renderTimestamp:m,textColor:E="text",textSize:p,titleWeight:g="bold",withParticipantsCount:C=!1,withScreenName:T=!0}){if(e){const a=e.type,c=(0,i.Z)(e,_).map((({user:e})=>e)),d=r?(0,o.ZP)(e,_,r):(0,o.ZP)(e,_,r,2);return n.createElement(l.Z,{conversationType:a,highlightingTokens:t,isConversationSearchTitle:r,isMessageSearchTitle:s,participants:c,renderAvatarCell:u,renderTimestamp:m,textColor:E,textSize:p,title:d,titleWeight:g,withParticipantsCount:C,withScreenName:T})}{const e=d(c);return n.createElement(a.ZP,{color:E,numberOfLines:1,size:p,weight:g},(0,o.e7)(e,_))}}const d=(e=[])=>e.map((({data:e})=>e)),_=({conversation:e,newConversationParticipants:t,perspective:r})=>{if(e){if(e.type===s.CONVERSATION_TYPE.ONE_TO_ONE){const[t]=(0,i.Z)(e,r).map((({user:e})=>e));return t.name}return(0,o.ZP)(e,r)}{const e=d(t);return(0,o.e7)(e,r)}}},40342:(e,t,r)=>{r.d(t,{Z:()=>g});r(6886);var n=r(2784),a=r(25686),i=r(95995),o=r(3613),s=r(36934),l=r(73186),c=r(79404),d=r.n(c),_=r(85883),u=r(67621);const m="DMGroupConversationTitle",E=d().b93ba92d,p=l.Z.create((e=>({dmGroup:{display:"flex",flexDirection:"column"},highlightedTitle:{backgroundColor:e.colors.yellow500},messageSearchMiddot:{alignItems:"center"},messageSearchTitleContainer:{flexDirection:"row"},title:{maxWidth:"50%"}}))),g=({conversationType:e,highlightingTokens:t=null,isConversationSearchTitle:r=!1,isMessageSearchTitle:l=!1,participants:c,renderAvatarCell:d,renderTimestamp:g,textColor:C="text",textSize:T,title:f,titleWeight:h="bold",withParticipantsCount:A=!1,withScreenName:O=!0})=>{const S=g?g():null,[N]=c;if(e===_.CONVERSATION_TYPE.ONE_TO_ONE&&N){const e=N.name,s=r?(0,u.Y)(t,e):null,c=null!=s&&s.length?(0,u.SM)(s,e):void 0,_=n.createElement(i.Z,{color:C,isBlueVerified:N.is_blue_verified,isProtected:N.protected,isVerified:N.verified,name:e,nameSize:T,renderUserNameHighlights:c&&c,screenName:N.screen_name,weight:h,withLink:!1,withScreenName:O});return!r||l?n.createElement(a.Z,{style:p.messageSearchTitleContainer},l&&d?d():null,n.createElement(o.Z,{style:l&&p.messageSearchMiddot},_,S)):_}{const e=c.length,i=f?(0,u.Y)(t,f):null,_=f&&null!=i&&i.length?(0,u.SM)(i,f):void 0;if(r)return n.createElement(o.Z,{color:C},n.createElement(s.ZP,{color:C,numberOfLines:1,size:T,style:p.title,weight:h},_?_():f));const g=n.createElement(s.ZP,{color:C,numberOfLines:1,size:T,testID:m,weight:h},f);return!r||l?n.createElement(a.Z,{style:[p.dmGroup,l&&p.messageSearchTitleContainer]},l&&d?d():null,n.createElement(o.Z,{style:l&&p.messageSearchMiddot},g,S),e>0&&A&&n.createElement(s.ZP,{color:"gray700",numberOfLines:1,size:T},E({peopleCount:e}))):g}}},15721:(e,t,r)=>{r.d(t,{C7:()=>E,EL:()=>a,H6:()=>m,I4:()=>i,NK:()=>_,Nd:()=>o,TG:()=>d,Yu:()=>c,eR:()=>u,gL:()=>l,lt:()=>p,zU:()=>s});var n=r(22167);const a="dmSearchSlice",i=Object.freeze([n.Cr.MESSAGE_DELETE,n.Cr.REACTION_DELETE,n.Cr.MESSAGE_MARK_AS_SPAM,n.Cr.MESSAGE_MARK_AS_NOT_SPAM,n.Cr.CONVO_METADATA_UPDATE,n.Cr.DISABLE_NOTIFICATIONS,n.Cr.ENABLE_NOTIFICATIONS]),o=Object.freeze({CONVERSATION_CREATE:"ConversationCreate",CONVERSATION_NAME_UPDATE:"ConversationNameUpdate",JOIN_CONVERSATION:"JoinConversation",LAST_MESSAGE_READ_UPDATE:"LastMessageReadUpdate",MESSAGE_CREATE:"MessageCreate",MESSAGE_HIDE:"MessageHide",PARTICIPANTS_JOIN:"ParticipantsJoin",PARTICIPANTS_LEAVE:"ParticipantsLeave",UNKNOWN:"Unknown",WELCOME_MESSAGE_CREATE:"WelcomeMessageCreate"}),s={[o.CONVERSATION_NAME_UPDATE]:n.Cr.CONVERSATION_NAME_UPDATE,[o.JOIN_CONVERSATION]:n.Cr.JOIN_CONVERSATION,[o.MESSAGE_CREATE]:n.Cr.MESSAGE,[o.PARTICIPANTS_JOIN]:n.Cr.PARTICIPANTS_JOIN,[o.PARTICIPANTS_LEAVE]:n.Cr.PARTICIPANTS_LEAVE},l=Object.freeze([o.CONVERSATION_NAME_UPDATE,o.MESSAGE_CREATE,o.PARTICIPANTS_LEAVE,o.PARTICIPANTS_JOIN]),c=Object.freeze({MAX_PINS_REACHED:"max_pins_reached"}),d=Object.freeze({ALL:"all",GROUPS:"groups",PEOPLE:"people",MESSAGES:"messages"}),_=Object.freeze({GROUP:1,ONE_TO_ONE:0}),u=Object.freeze({ALL:"all",CELL_X_BUTTON:"cell_x_button",CONVERSATION_INFO:"conversation_info",DM_TAB:"dm_tab",GLOBAL_SETTINGS_MENU:"global_settings_menu",GROUPS:"groups",MESSAGES:"messages",PEOPLE:"people",REQUEST_ACTION_SHEET:"request_action_sheet",THREE_DOT_MENU:"three_dot_menu"}),m=Object.freeze({PRIMARY:"primary",REQUEST:"requests",LOW_QUALITY:"low_quality",NOT_AVAILABLE:"not_available"}),E=Object.freeze({CARD:"card",GIF:"gif",NOT_APPLICABLE:"not_applicable",PHOTO:"photo",TEXT:"text",TWEET:"tweet",UNKNOWN:"unknown",VIDEO:"video",VOICE:"voice"}),p=Object.freeze({CONVERSATION:"conversation",MESSAGE:"message"})},67986:(e,t,r)=>{r.d(t,{Z:()=>n});const n={conversationAvatar:"DM_Conversation_Avatar",reaction:"DM_Reaction",reactions:"DM_Reactions",reactionUserCell:"DM_Reaction_UserCell",newDM:"NewDM_Button",untrustedThumbnail:"DM_Untrusted_Thumbnail"}},67621:(e,t,r)=>{r.d(t,{BB:()=>I,FW:()=>f,Fb:()=>R,KC:()=>T,LK:()=>b,Ly:()=>Z,Qu:()=>O,SM:()=>h,Ss:()=>p,Xx:()=>w,Y:()=>A,bZ:()=>g,dI:()=>v,e4:()=>N,k2:()=>P,oK:()=>S,rR:()=>C,vm:()=>y,y9:()=>D});var n=r(2784),a=r(75275),i=r(69165),o=r(3614),s=r(53223),l=r(56776),c=r(7871),d=r.n(c),_=r(43790),u=r(34562),m=r(54352),E=r(15721);const p=(e,t)=>t.location&&t.location.state&&t.location.state.tweetAttachment,g=(e,t)=>t.location&&t.location.state&&t.location.state.participants,C=(e,t)=>t.location&&t.location.state&&t.location.state.isNewGroupConversation,T=e=>e&&(0,o.Z)(e),f=(e,t)=>{if(e&&t){const r=d()(e),n=t.toLowerCase().indexOf(e.toLowerCase());return{startIndex:n,endIndex:n+r}}return{startIndex:-1,endIndex:-1}},h=(e,t)=>{const r=a.ZP.plainTextParts(t);return()=>n.createElement(n.Fragment,null,r.map(((t,r)=>{let a=t;return"text"===t.entityType?a={...t,highlights:e,highlightType:"background"}:"emoji"===t.entityType&&(a={...t,highlights:e}),n.createElement(i.ZP,{key:`${r}`,part:a})})))},A=(e,t)=>{const r=T(e),n=null==r?void 0:r.filter((e=>t&&-1!==t.toLowerCase().indexOf(e.toLowerCase()))),a=null!=n&&n.length?(0,s.Z)(n.map((e=>((e,t)=>{if(e&&t){const r=d()(e),n=t.toLowerCase().indexOf(e.toLowerCase());return[n,n+r]}})(e,t)))):void 0;return a&&null!=a&&a.length?a.sort(((e,t)=>e[0]-t[0])):void 0},O=e=>{const{message_data:t}=e;let r=E.C7.UNKNOWN;const n=t&&t.attachment||{};return n.tweet?r=E.C7.TWEET:n.photo?r=E.C7.PHOTO:n.animated_gif?r=E.C7.GIF:n.video?r=n.video.audio_only?E.C7.VOICE:E.C7.VIDEO:n.card?r=E.C7.CARD:null!=t&&t.text&&(r=E.C7.TEXT),r};function S(e,t){return e.findIndex((e=>e.id===t))}function N(e){return e===u._2.SECONDARY?E.H6.REQUEST:e===u._2.TERTIARY?E.H6.LOW_QUALITY:E.H6.PRIMARY}function b(e){return e.isTrue("dm_voice_rendering_enabled")}function v(e,t){return!!(e&&e.video&&b(t))&&!!e.video.audio_only}function I(e,t,r,n){return{pathname:`/i/report/dm_conversation/${e}`,state:{clientReferer:t,inboxType:n,scribeNamespace:r}}}function y(e,t){if(!e)return{name:"",screenName:"",idStr:""};const r=(0,_.Z)(e,t).map((({user:e})=>e)),n=r&&r[0];return{name:n&&n.name||"",screenName:n&&n.screen_name||"",idStr:n&&n.id_str||""}}const R=e=>e===u._2.TERTIARY?"low_quality_timeline":e===u._2.SECONDARY?"requests_timeline":"inbox_timeline",P=e=>e===u._2.TERTIARY?"/messages/requests/additional":e===u._2.SECONDARY?"/messages/requests":"/messages",Z=e=>()=>m.m1(e),w=e=>t=>m.De(e,t),D=(e,t)=>{const r=(0,l.Z)(e,(e=>!!e.message_data&&(e.message_data&&e.message_data.recipient_id===t)));return r&&r.message_data&&r.message_data.quick_reply&&r.message_data.quick_reply&&"options"===r.message_data.quick_reply.type?r.message_data.quick_reply:void 0}},23162:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(2784),a=r(25686),i=r(59890),o=r(73186);function s({borderColor:e="borderColor",label:t}){return t?n.createElement(i.Z,{style:l.root,withGutter:!0},n.createElement(a.Z,{style:l.gapColumn},n.createElement(a.Z,{style:[l.gap,l[e]]})),n.createElement(a.Z,{style:l.gapText},t),n.createElement(a.Z,{style:l.gapColumn},n.createElement(a.Z,{style:[l.gap,l[e]]}))):n.createElement(a.Z,{style:[l.root,l.gap,l[e]]})}const l=o.Z.create((e=>({borderColor:{backgroundColor:o.Z.theme.colors.borderColor},nestedBorderColor:{backgroundColor:o.Z.theme.colors.nestedBorderColor},gap:{height:e.borderWidths.small},gapColumn:{flex:1,justifyContent:"center"},gapText:{"flex-basis":"auto"},root:{marginVertical:e.spaces.space4}})))}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/shared~loader.Typeahead~loader.DMDrawer~bundle.Communities~bundle.Delegate~bundle.DirectMessages~bundle.DMRic.de5d8669.js.map